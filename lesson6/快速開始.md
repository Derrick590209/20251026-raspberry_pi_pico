# ğŸš€ MQTT æ¸¬è©¦ - å¿«é€Ÿé–‹å§‹æŒ‡å—

## âœ… å•é¡Œå·²ä¿®å¾©

- âœ… **SyntaxError å·²ä¿®å¾©**ï¼šCell 0 é¡å‹å·²å¾ code æ”¹ç‚º markdown
- âœ… **MQTT é€£ç·šå·²ç©©å®š**ï¼šBroker å·²é‡å•Ÿ

---

## ğŸ¯ æœ€ç°¡å–®çš„æ¸¬è©¦æ–¹æ³•ï¼ˆæ¨è–¦ï¼‰

### **æ–¹æ³• 1ï¼šå‘½ä»¤åˆ—æ¸¬è©¦ï¼ˆæœ€å¯é ï¼Œ30 ç§’å®Œæˆï¼‰**

æ‰“é–‹**å…©å€‹çµ‚ç«¯æ©Ÿ**ï¼š

**çµ‚ç«¯æ©Ÿ 1ï¼ˆè¨‚é–±è€…ï¼‰ï¼š**
```bash
cd /home/pi/Documents/GiHub/20251026-raspberry_pi_pico
uv run python lesson6/mqtt_subscribe_test.py
```

**çµ‚ç«¯æ©Ÿ 2ï¼ˆç™¼å¸ƒè€…ï¼‰ï¼š**
```bash
cd /home/pi/Documents/GiHub/20251026-raspberry_pi_pico
uv run python lesson6/mqtt_test_simple.py
```

**é æœŸçµæœï¼š**
- çµ‚ç«¯æ©Ÿ 1 æœƒå³æ™‚é¡¯ç¤ºæ”¶åˆ°çš„è¨Šæ¯
- æ²’æœ‰ä»»ä½•æ–·ç·šéŒ¯èª¤ âœ…

---

### **æ–¹æ³• 2ï¼šä¸€éµæ¸¬è©¦**

```bash
cd /home/pi/Documents/GiHub/20251026-raspberry_pi_pico
./lesson6/test_mqtt.sh
```

é¸æ“‡ **3) åŒæ™‚é‹è¡Œç™¼å¸ƒè€…å’Œè¨‚é–±è€…**

---

### **æ–¹æ³• 3ï¼šMosquitto å·¥å…·æ¸¬è©¦ï¼ˆæœ€å¿«ï¼Œ10 ç§’ï¼‰**

**çµ‚ç«¯æ©Ÿ 1ï¼š**
```bash
mosquitto_sub -h localhost -t "å®¢å»³/æ„Ÿæ¸¬å™¨" -v
```

**çµ‚ç«¯æ©Ÿ 2ï¼š**
```bash
mosquitto_pub -h localhost -t "å®¢å»³/æ„Ÿæ¸¬å™¨" -m '{"temperature": 25, "humidity": 60}'
```

---

## ğŸ““ ä½¿ç”¨ Jupyter Notebookï¼ˆå¦‚æœéœ€è¦ï¼‰

### **âš ï¸ é‡è¦è¦å‰‡**

1. **æ¯æ¬¡æ¸¬è©¦å‰é‡å•Ÿ Kernel**
   - é¸å–®ï¼š`Kernel` â†’ `Restart Kernel` â†’ `Restart`
   - æˆ–æŒ‰å…©æ¬¡ `0`ï¼ˆåœ¨å‘½ä»¤æ¨¡å¼ä¸‹ï¼‰

2. **æ­£ç¢ºåŸ·è¡Œé †åº**
   ```
   Cell 1 (åŒ¯å…¥å¥—ä»¶) âœ…
      â†“
   Cell 2 (è¨­å®šé…ç½®) âœ… â† ç”Ÿæˆæ–°çš„ CLIENT_ID
      â†“
   Cell 3 (å®šç¾©å›èª¿) âœ…
      â†“
   Cell 4 (å»ºç«‹é€£ç·š) âœ… â† åªåŸ·è¡Œä¸€æ¬¡ï¼
      â†“
   æ¸¬è©¦ Cells (å¯é‡è¤‡åŸ·è¡Œ) âœ…
   ```

3. **ç¦æ­¢æ“ä½œ**
   - âŒ ä¸è¦é‡è¤‡åŸ·è¡Œ Cell 4
   - âŒ ä¸è¦è·³è‘—åŸ·è¡Œ
   - âŒ ä¸è¦åŒæ™‚é–‹å¤šå€‹ç›¸åŒçš„ Notebook

### **æ­£ç¢ºæµç¨‹ï¼ˆlesson6_2.ipynb + lesson6_1.ipynbï¼‰**

#### **æ­¥é©Ÿ 1ï¼šå•Ÿå‹• Jupyter**
```bash
cd /home/pi/Documents/GiHub/20251026-raspberry_pi_pico
uv run jupyter notebook
```

#### **æ­¥é©Ÿ 2ï¼šé–‹å•Ÿè¨‚é–±è€…ï¼ˆlesson6_2.ipynbï¼‰**
1. é‡å•Ÿ Kernel
2. åŸ·è¡Œ Cell 1 â†’ 2 â†’ 3 â†’ 4
3. çœ‹åˆ° "âœ… MQTT è¨‚é–±è€…å·²å°±ç·’" å°±æˆåŠŸäº†

#### **æ­¥é©Ÿ 3ï¼šé–‹å•Ÿç™¼å¸ƒè€…ï¼ˆlesson6_1.ipynbï¼‰**
1. é–‹æ–°åˆ†é 
2. é‡å•Ÿ Kernel
3. åŸ·è¡Œ Cell 1 â†’ 2 â†’ 3 â†’ 4
4. åŸ·è¡Œ Cell 6 ç™¼å¸ƒæ¸¬è©¦

#### **æ­¥é©Ÿ 4ï¼šæŸ¥çœ‹çµæœ**
- åˆ‡æ›å› lesson6_2.ipynb
- æ‡‰è©²æœƒçœ‹åˆ°æ”¶åˆ°çš„è¨Šæ¯ ğŸ“©

---

## ğŸ› å¦‚æœé‚„æ˜¯å‡ºç¾å•é¡Œ

### **ç—‡ç‹€ï¼šé‚„æ˜¯çœ‹åˆ°æ–·ç·šéŒ¯èª¤**

**åŸå› ï¼š** Jupyter ä¸­é‚„æœ‰èˆŠé€£ç·šåœ¨é‹è¡Œ

**è§£æ±ºï¼š**
```bash
# 1. åœæ­¢ Jupyterï¼ˆåœ¨é‹è¡Œ Jupyter çš„çµ‚ç«¯æ©ŸæŒ‰ Ctrl+Cï¼‰
# 2. é‡å•Ÿ Mosquitto
sudo systemctl restart mosquitto

# 3. æ”¹ç”¨å‘½ä»¤åˆ—æ¸¬è©¦ï¼ˆ100% å¯é ï¼‰
cd /home/pi/Documents/GiHub/20251026-raspberry_pi_pico
uv run python lesson6/mqtt_subscribe_test.py  # çµ‚ç«¯æ©Ÿ 1
uv run python lesson6/mqtt_test_simple.py      # çµ‚ç«¯æ©Ÿ 2
```

---

## ğŸ“Š æª”æ¡ˆèªªæ˜

### **Python è…³æœ¬ï¼ˆæ¨è–¦ï¼‰**
- `mqtt_test_simple.py` - ç™¼å¸ƒè€…
- `mqtt_subscribe_test.py` - è¨‚é–±è€…
- `test_mqtt.sh` - ä¸€éµæ¸¬è©¦è…³æœ¬

### **Jupyter Notebooks**
- `lesson6_1.ipynb` - MQTT ç™¼å¸ƒè€…ï¼ˆå·²ä¿®å¾©ï¼‰
- `lesson6_2.ipynb` - MQTT è¨‚é–±è€…

### **æ–‡æª”**
- `å¿«é€Ÿé–‹å§‹.md` - æœ¬æ–‡ä»¶
- `MQTTæ¸¬è©¦æŒ‡å—.md` - è©³ç´°æ¸¬è©¦æŒ‡å—
- `ç·Šæ€¥ä¿®å¾©æŒ‡å—.md` - å•é¡Œæ’è§£

---

## âœ¨ æˆåŠŸæŒ‡æ¨™

### **æ¸¬è©¦æˆåŠŸçš„æ¨™èªŒï¼š**

âœ… **ç™¼å¸ƒè€…é¡¯ç¤ºï¼š**
```
âœ… æˆåŠŸé€£æ¥åˆ° MQTT Broker
[1/5] ç™¼å¸ƒæ•¸æ“š:
  æº«åº¦: 24.44Â°C
  æ¿•åº¦: 64.36%
  é›»ç‡ˆ: é–‹
  âœ“ è¨Šæ¯å·²ç™¼å¸ƒ (ID: 1)
```

âœ… **è¨‚é–±è€…é¡¯ç¤ºï¼š**
```
============================================================
ğŸ“© è¨Šæ¯ #1 - 23:45:12
============================================================
ğŸŒ¡ï¸  æº«åº¦: 24.44Â°C
ğŸ’§ æ¿•åº¦: 64.36%
ğŸ’¡ é›»ç‡ˆ: é–‹
```

âœ… **æ²’æœ‰ä»»ä½•æ–·ç·šéŒ¯èª¤**

---

## ğŸ’¡ æœ€ä½³å¯¦è¸

1. **é–‹ç™¼éšæ®µï¼š** ä½¿ç”¨å‘½ä»¤åˆ—è…³æœ¬
2. **æ¼”ç¤ºéšæ®µï¼š** ä½¿ç”¨ Jupyter Notebookï¼ˆå°å¿ƒæ“ä½œï¼‰
3. **å‡ºå•é¡Œæ™‚ï¼š** ç«‹å³åˆ‡æ›åˆ°å‘½ä»¤åˆ—è…³æœ¬

---

## ğŸ“ å¿«é€Ÿå‘½ä»¤åƒè€ƒ

```bash
# æœ€æ¨è–¦ï¼šå‘½ä»¤åˆ—æ¸¬è©¦
cd /home/pi/Documents/GiHub/20251026-raspberry_pi_pico
uv run python lesson6/mqtt_subscribe_test.py  # çµ‚ç«¯æ©Ÿ 1
uv run python lesson6/mqtt_test_simple.py      # çµ‚ç«¯æ©Ÿ 2

# ä¸€éµæ¸¬è©¦
./lesson6/test_mqtt.sh

# æª¢æŸ¥ Broker ç‹€æ…‹
systemctl status mosquitto

# é‡å•Ÿ Brokerï¼ˆå¦‚æœéœ€è¦ï¼‰
sudo systemctl restart mosquitto

# æŸ¥çœ‹æ—¥èªŒ
sudo tail -f /var/log/mosquitto/mosquitto.log
```

---

**ç¾åœ¨é–‹å§‹æ¸¬è©¦å§ï¼** ğŸ‰

å»ºè­°å¾**å‘½ä»¤åˆ—æ¸¬è©¦**é–‹å§‹ï¼Œé€™æ˜¯æœ€å¯é çš„æ–¹æ³•ï¼





